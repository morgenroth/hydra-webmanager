<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
	xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:b="urn:import:com.github.gwtbootstrap.client.ui"
	xmlns:b2="urn:import:com.github.gwtbootstrap.datepicker.client.ui"
	xmlns:base="urn:import:com.github.gwtbootstrap.client.ui.base"
	xmlns:hydra="urn:import:de.tubs.cs.ibr.hydra.webmanager.client">
	<ui:style>
		.formButton {
			margin-left: 6px;
			margin-right: 6px;
		}
	</ui:style>
	<g:HTMLPanel>
		<b:Row>
			<b:Column size="12">
				<b:Heading size="2">Session Editor</b:Heading>
			</b:Column>
		</b:Row>
		<b:Row><b:Column size="12" ui:field="alertColumn" /></b:Row>
		<b:TabPanel ui:field="panelTabs">
			<b:Tab heading="Properties" active="true">
				<!-- Properties -->
				<b:Form type="HORIZONTAL">
					<b:Row>
						<b:Column size="12">
							<b:ControlGroup>
								<b:ControlLabel for="textKey">Key</b:ControlLabel>
								<b:Controls>
									<b:TextBox alternateSize="XLARGE" b:id="textKey"
										ui:field="textPropKey" b:readOnly="true" text="- not assigned -"></b:TextBox>
								</b:Controls>
							</b:ControlGroup>
							<b:ControlGroup>
								<b:ControlLabel for="textOwner">Owner</b:ControlLabel>
								<b:Controls>
									<b:TextBox alternateSize="XLARGE" b:id="textOwner"
										ui:field="textPropOwner" b:readOnly="true" text="- not assigned -"></b:TextBox>
								</b:Controls>
							</b:ControlGroup>
							<b:ControlGroup>
								<b:ControlLabel for="textDescription">Description</b:ControlLabel>
								<b:Controls>
									<b:TextBox alternateSize="XLARGE" b:id="textDescription"
										ui:field="textPropDesc"></b:TextBox>
									<b:HelpBlock>This is the description shown in the list of
										sessions.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>
							<b:ControlGroup>
								<b:ControlLabel for="textState">State</b:ControlLabel>
								<b:Controls>
									<b:TextBox alternateSize="XLARGE" b:id="textState"
										ui:field="textPropState" b:readOnly="true" text="initial"></b:TextBox>
								</b:Controls>
							</b:ControlGroup>
							<b:ControlGroup>
								<b:ControlLabel>Removal</b:ControlLabel>
								<b:Controls>
									<b:CheckBox ui:field="checkRemove">Yes, I want to DELETE this session.</b:CheckBox>
									<b:Button ui:field="buttonRemove" type="DANGER" b:enabled="false">Remove</b:Button>
								</b:Controls>
							</b:ControlGroup>
						</b:Column>
					</b:Row>
				</b:Form>
			</b:Tab>
			<!-- Base -->
			<b:Tab heading="Base">
				<b:Form type="HORIZONTAL">
					<b:Row>
						<b:Column size="12">
							<!-- base node image -->
							<b:ControlGroup>
								<b:ControlLabel for="listImage">Node image</b:ControlLabel>
								<b:Controls>
									<b:ListBox alternateSize="XLARGE" b:id="listImage"
										ui:field="listBaseImage"></b:ListBox>
									<b:HelpBlock>The selected image will be the base for all
										created nodes.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>

							<!-- opkg respository -->
							<b:ControlGroup>
								<b:ControlLabel for="textRepository">Package repository</b:ControlLabel>
								<b:Controls>
									<b:InputAddOn prependIcon="GLOBE">
										<b:TextBox alternateSize="XLARGE" b:id="textRepository"
											ui:field="textBaseRepository" b:placeholder="http://"></b:TextBox>
									</b:InputAddOn>
									<b:HelpBlock>This OpenWrt repository will be added to the file
										/etc/opkg.conf and used as source for installation packages.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>

							<!-- packages.install -->
							<b:ControlGroup>
								<b:ControlLabel for="textPackages">Packages</b:ControlLabel>
								<b:Controls>
									<b:TextArea alternateSize="XLARGE" b:id="textPackages"
										ui:field="textBasePackages"></b:TextArea>
									<b:HelpBlock>These packages are installed during the base
										preparation. Put each package into a separate line.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>

							<!-- TODO: additional packages (GwtUpload) -->

							<!-- Monitor Nodes -->
							<b:ControlGroup>
								<b:ControlLabel for="textMonitorNodes">Monitor nodes</b:ControlLabel>
								<b:Controls>
									<b:TextArea alternateSize="XLARGE" b:id="textMonitorNodes"
										ui:field="textBaseMonitorNodes"></b:TextArea>
									<b:HelpBlock>These hosts can communicate to all the nodes and
										never gets blocked. Put each IP address (IPv4 only) into a
										separate line.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>

							<!-- Node Template (qemu) -->
							<b:ControlGroup>
								<b:ControlLabel for="textQemuTemplate">Template (QEMU)</b:ControlLabel>
								<b:Controls>
									<b:TextArea alternateSize="XLARGE" b:id="textQemuTemplate"
										ui:field="textBaseQemuTemplate"></b:TextArea>
									<b:HelpBlock>This is the template for QEMU virtualization used
										to create nodes on the slaves.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>

							<!-- Node Template (vbox) -->
							<b:ControlGroup>
								<b:ControlLabel for="textVboxTemplate">Template (VirtualBox)</b:ControlLabel>
								<b:Controls>
									<b:TextArea alternateSize="XLARGE" b:id="textVboxTemplate"
										ui:field="textBaseVboxTemplate"></b:TextArea>
									<b:HelpBlock>This is the template for VirtualBox virtualization
										used to create nodes on the slaves.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>
						</b:Column>
					</b:Row>
				</b:Form>
		</b:Tab>
			<!-- Movement -->
			<b:Tab heading="Movement">
				<b:Form type="HORIZONTAL">
					<b:Row>
						<b:Column size="12">
							<!-- movement module -->
							<b:ControlGroup>
								<b:ControlLabel for="listMovAlgorithm">Movement Algorithm</b:ControlLabel>
								<b:Controls>
									<b:ListBox alternateSize="XLARGE" b:id="listMovAlgorithm"
										ui:field="listMovementAlgorithm">
										<b:item value="none">None</b:item>
										<b:item value="randomwalk">Random Walk</b:item>
										<b:item value="theone">The ONE Trace Player</b:item>
										<b:item value="static">Static Connections</b:item>
									</b:ListBox>
									<b:HelpBlock>The movement will be calculated using the selected
										algorithm.</b:HelpBlock>
								</b:Controls>
							</b:ControlGroup>
							<!-- Each movement algorithm has its own settings -->
							<g:DeckPanel ui:field="panelMovement">
								<!-- None -->
								<g:FlowPanel>
								</g:FlowPanel>
								<!-- Random Walk -->
								<g:FlowPanel>
									<!-- Duration -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpDuration">Duration</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn prependIcon="TIME" appendText="s">
												<b:TextBox alternateSize="SMALL" b:id="textRwpDuration"
													ui:field="textMovementRwpDuration" b:placeholder="infinite" />
											</b:InputAddOn>
											<b:HelpBlock>
												This is the time the simulation will last.
											</b:HelpBlock>
										</b:Controls>
									</b:ControlGroup>

									<!-- Area size -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpAreaSizeHeight">Area</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn prependText="Size" appendText="m">
												<b:TextBox alternateSize="SMALL" b:id="textRwpAreaSizeHeight"
													ui:field="textMovementRwpAreaSizeHeight" b:placeholder="500" />
												<base:AddOn text="x" />
												<b:TextBox alternateSize="SMALL" b:id="textRwpAreaSizeWidth"
													ui:field="textMovementRwpAreaSizeWidth" b:placeholder="500" />
											</b:InputAddOn>
										</b:Controls>
									</b:ControlGroup>

									<!-- Resolution -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpResolution">Unit size / Resolution</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn appendText="s">
												<b:TextBox alternateSize="SMALL" b:id="textRwpResolution"
													ui:field="textMovementRwpResolution" b:placeholder="0.2" />
											</b:InputAddOn>
											<b:HelpBlock>
												Calculate step and connection every
												x seconds.
												Strict adherence to the resolution
												can not be guaranteed,
												however drift in
												# sleep() will not affect the correctness of
												the traces.
											</b:HelpBlock>
										</b:Controls>
									</b:ControlGroup>

									<!-- Moving Time -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpMovetime">Moving Time</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn appendText="units">
												<b:TextBox alternateSize="SMALL" b:id="textRwpMovetime"
													ui:field="textMovementRwpMovetime" b:placeholder="75" />
											</b:InputAddOn>
											<b:HelpBlock>
												Change direction after x units of time.
											</b:HelpBlock>
										</b:Controls>
									</b:ControlGroup>

									<!-- Velocity -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpVelocity">Velocity</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn prependText="Range" appendText="m/s">
												<b:TextBox alternateSize="SMALL" b:id="textRwpVelocity"
													ui:field="textMovementRwpVmin" b:placeholder="10" />
												<base:AddOn text="-" />
												<b:TextBox alternateSize="SMALL" b:id="textRwpVelocityMax"
													ui:field="textMovementRwpVmax" b:placeholder="10" />
											</b:InputAddOn>
											<b:HelpBlock>
												Speed is uniformly distributed between minimum
												and maximum.
											</b:HelpBlock>
										</b:Controls>
									</b:ControlGroup>

									<!-- Communication Range -->
									<b:ControlGroup>
										<b:ControlLabel for="textRwpRange">Communication Range</b:ControlLabel>
										<b:Controls>
											<b:InputAddOn appendText="m">
												<b:TextBox alternateSize="SMALL" b:id="textRwpRange"
													ui:field="textMovementRwpRange" b:placeholder="300" />
											</b:InputAddOn>
										</b:Controls>
									</b:ControlGroup>
								</g:FlowPanel>
								<!-- ONE Traces -->
								<g:FlowPanel>
									<!-- TODO: upload mechanism for trace files -->
									<b:ControlGroup>
										<b:ControlLabel for="textOneUpload">Trace</b:ControlLabel>
										<b:Controls>
											<b:FileUpload b:id="textOneUpload" ui:field="textMovementOneUpload"></b:FileUpload>
										</b:Controls>
									</b:ControlGroup>
								</g:FlowPanel>
								<!-- Static -->
								<g:FlowPanel>
									<!-- Static connections -->
									<b:ControlGroup>
										<b:ControlLabel for="textStaticConnections">Static Connections</b:ControlLabel>
										<b:Controls>
											<b:TextArea alternateSize="XLARGE" b:id="textStaticConnections"
												ui:field="textMovementStaticConnections"></b:TextArea>
											<b:HelpBlock>Static connections are defined by each
												connection in one line.
												Each line defines an unidirectional link. For bidirectional
												links, both connections
												must be defined separately.</b:HelpBlock>
										</b:Controls>
									</b:ControlGroup>
								</g:FlowPanel>
							</g:DeckPanel>
						</b:Column>
					</b:Row>
				</b:Form>
		</b:Tab>
			<!-- Nodes -->
			<b:Tab heading="Nodes" ui:field="tabNodes">
				<hydra:SessionNodesEditor ui:field="nodesEditor" />
			</b:Tab>
		</b:TabPanel>
		<b:Row>
			<b:Column size="12" ui:field="columnFormActions">
				<b:FormActions>
					<b:Button addStyleNames="{style.formButton}" icon="OK" type="SUCCESS" ui:field="buttonApply">Apply</b:Button>
					<b:Button addStyleNames="{style.formButton}" icon="REMOVE" type="DEFAULT" ui:field="buttonReset">Reset</b:Button>
				</b:FormActions>
			</b:Column>
		</b:Row>
		<b:Row>
			<b:Column size="12">
				<b:Button icon="REPLY" type="LINK" ui:field="buttonBack">Back to
					sessions</b:Button>
			</b:Column>
		</b:Row>
	</g:HTMLPanel>
</ui:UiBinder> 